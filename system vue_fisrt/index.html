<!DOCTYPE html>
<html lang="en" >
<link rel='shortcut icon' href='/css/3ByI2t.ico' type='image/x-icon'>        
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="/css/font.css">   
<head>
  <meta charset="UTF-8">
  <title>Jaipun</title>
  
  <style>

.header {
    padding: 0;
    margin: 0;
    box-sizing: border-box;
    background: #54ada1;
    height: 70px;
    display: block;
    width: 100%;
    box-shadow: 0 4px 12px 0 rgba(0,0,0,.05)!important;
    position: fixed;
    left: 0;
    top: 0;
    z-index: 2;
   transition: .3s;
   padding-top: 30px;

}
.header.small {
    height: 45px;
    padding-top: 10px;
}


.header nav{
    max-width: 700px;
    justify-content: space-between;
    margin: 0 auto;
    padding: 0 10px;
    position: relative;
    display: flex;
}



.navleft{
    flex: 1 1 10%;
    padding: 0;
    margin: 0;
    box-sizing: border-box;
}

.navleft ul{
    flex: 1 1 20%;
    justify-content: space-between;
    align-items: center;
    /* padding-top: 15px; */
    box-sizing: border-box;
    display: flex;
    padding: 0px;
    margin: 0;
    box-sizing: border-box;
    list-style: none;
}

.navcenter{
    flex: 1 1 80%;
    padding: 0;
    margin: 0;
    box-sizing: border-box;
    justify-content: center;
    display: flex;
}

.navright{
    flex: 1 1 10%;
    padding: 0;
    margin: 0;
    padding-top: 0px;
    box-sizing: border-box;
}

.navright ul{
        /* flex: 1 1 30%; */
        justify-content: space-between;
        align-items: center;
        box-sizing: border-box;
        display: flex;
        margin: 0;
        padding: 0px;
        box-sizing: border-box;
        list-style: none;
}


#frmsearch{
    width: 100%;
    position: fixed;
    left: 0;
    top: 0; 
    height: 100%;
    z-index: 1;display: none;
    background: #ffffffe0;
}

.frmsearch-into{
    max-width: 420px;
    margin: 55px;
    margin-left: auto;
    margin-right: auto;
}

.frmsearch-text{
    width: 100%;border: none;outline: none;background:none;    padding: 1rem;
    font-size: 1.3rem;font-family: 'cs_prajad', sans-serif;margin: auto;border-bottom: 1px solid #BBB;
}


      /************************ FEED START********************************/
      a {
        color:#000;
        text-decoration: none;
      }
    .feed{
        box-shadow: 0 4px 12px 0 rgba(0,0,0,.05)!important;
        border-bottom: 2px solid rgba(0,0,0,.15)!important;
        word-wrap: break-word;
        float: left;
        margin: 2px 0px;
        width: 100%;
        background: #fff;
    }
    .feed-title{
            float: left;
            width: 100%;
    }
    
    .feed-title-text{
        margin: 20px 20px 0px 40px;
        display: inline-block;
        font-size: 28px;  
        font-weight: 600;
        color: #000;
    }
    
    .feed-title-under{
        margin-top: 0px;
        margin-bottom: 0px;
        width: 90%;
        float: left;
        margin-left: 35px;
        opacity: 0.8;
    }
    
    .feed-tag{
        font-size: 18px;
        float: left;
        margin: 0px 10px;
        font-weight: 600;
    }
    
    .feed-type{
        float: left;
        font-weight: 600;
        color: #008a0c;
        font-size: 18px;
        margin: 0px 10px;
    }
    .feed-content{
        float: left;
        width: 100%;
    }
    
    .feed-content img { 
        display: block;
        margin-left: auto;
        margin-right: 60px;
        margin-top: -40px;
        margin-bottom: -180px;
        width: 200px;
    }
    
    .feed-content-into{
        word-wrap: break-word;
        height: 2em;
        overflow: hidden;
        margin: 40px 300px 15px 40px;
        min-height: 70px;
        color: #757575;
        font-size: 18px;
        line-height: 32px;
    }
    
    .feed-date{
        margin: 0px 40px 10px;
        float: left;
        font-size: 12px;
    }
    
    .feed-like{
        font-size:12px;
        margin:0px 10px
    }
    
    .feed-writer{
        float: left;
        width: 100%;
        border-top: none;
        padding-bottom: 16px;
    }
    
    .feed-writer-profile{
            float:left;
            margin: 5px 10px 5px 35px;
            border-radius: 100px;
            height: 35px;
            width: 35px;
            object-fit: cover;
            display: inline-block;
    }
    
    .feed-writer-name{
        float: left;
            font-weight: 600;
            color: #E53935;
            margin: 10px 0;
            font-size: 18px;
    }
    
    
    .feed-writer-detail{
        font-weight: 500;
        color: #000;
        font-size: 16px;
        margin-left: 10px;
    }
    
    .feed-user-draw{
        display: block !important;
        margin-left: auto !important;
        margin-top: -45px !important;
        margin-bottom: -140px !important;
        width: 160px !important;
    }
    
        
    @media only screen and (max-width: 820px) {
        .feed-data{
            padding-right: 20px;
            padding-left: 20px;
        }
        .feed{
            margin:5px 0px;
        }
        .feed-title-text{
            margin: 20px 20px 0px 20px;
            font-size: 28px;
        }
        
        .feed-title-under{
            margin-left: 15px;
        }
    
        .feed-tag{
            font-size: 18px;
        }
    
        .feed-type{
            font-size: 18px;
        }
    
        .feed-content img{
            display: block;
            margin-left: auto;
            margin-right: auto;
            margin-top: 0px;
            margin-bottom: 0px;
            width: 200px;
        }
        .feed-user-draw{
            display: block !important;
            margin-left: auto !important;
            margin-right: auto!important;
            margin-top: 0px !important;
            margin-bottom: 0px !important;
            width: 200px !important;
        }
    
        .feed-content-into{
            margin: 0 30px;
            min-height: 70px;
            font-size: 18px;
        }
        
        .feed-date{
            margin: 0px 30px 10px;
        }
    
        .feed-writer-profile{
            margin: 5px 10px 5px 30px;
        }
    
    }
    
    
    @media only screen and (max-width: 620px) {
      .header {
        height: 50px;
        padding-top: 10px;
      }

        .feed-data{
            padding-right: 0px;
            padding-left: 0px;
        }
        .feed-title-text{
            margin: 20px 20px 0px 20px;
            font-size: 22px;
        }
        
        .feed-title-under{
            margin-left: 15px;
        }
    
        .feed-tag{
            font-size: 16px;
        }
    
        .feed-type{
            font-size: 16px;
        }
    
        .feed-content img{
            display: block;
            margin-left: auto;
            margin-right: auto;
            margin-top: 0px;
            margin-bottom: 0px;
            width: 140px;
        }
    
        .feed-user-draw{
            display: block !important;
            margin-left: auto !important;
            margin-right: auto !important;
            margin-top: 0px !important;
            margin-bottom: 0px !important;
            width: 140px !important;
        }
    
        .feed-content-into{
            margin: 0 20px;
            min-height: 70px;
            font-size: 16px;
        }
        
        .feed-date{
            margin: 0px 20px 10px;
        }
    
        .feed-writer-profile{
            margin: 5px 10px 5px 20px;
        }
    
    }
        
    /***************************FEED END************************************/


    /*************************** TAG FEED START ************************************/
    .tag {
        padding: 20px 0;
        text-align: center;
        word-wrap: break-word;
        float: left;
        margin: 2px 0px;
        width: 100%;
        background: #fff;
    }
    .tag img {
        width: 110px;
    }

    .tag-text {
        float: left;
        width: 100%;
    }

    .tag-name {
        color: #ff5959;
        margin: 0px;
        display: inline-block;
        font-size: 22px;
        font-weight: 600;
    }

    .tag-detail {
        float: none;
        margin: 0px 50px;
        font-size: 16px;
        font-weight: 400;
    }

    .tag-int {
        font-size: 18px;
        margin: 0px 10px;
        float: none;
        font-weight: 500;
    }
    /*************************** TAG FEED END ************************************/
    .btn-write {
    display: table;
    width: 100%;
    box-shadow: 0 0.5px 12px -8px #636463;
    background-color: #fff;
    margin-top: 80px;
    margin-bottom: 10px;
    padding-top: 20px;
    padding-bottom: 20px;
    text-align: center;
}
.btn-write-text {
  
    padding: 2px 10px;
    font-size: 22px;
    border-bottom: 5px solid #f3f3f3;
    border-radius: 2px;
}

.scroll{
  overflow-y: auto;
  overflow-x: hidden;
  height: 100%;
  width: 100%;
  position: fixed;
  right: 0;
  top:0;
}

/*******************profile start***********************/
.profile-photo {
    width: auto;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: -60px;
}

.profile-photo-img {
    border-radius: 100px;
    height: 120px;
    object-fit: cover;
    width: 120px;
    display: inline-block;
    margin: 0px;
    padding: 0px;
}

.profile-followers {
    padding: 0px 20px;
    margin-top: 20px;
    padding-bottom: 25px;
    margin-bottom: 20px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.profile-follow-int {
    font-size: 25px;
}

.profile-follow-text {
    margin-top: 5px;
    display: block;
    color: #8a8b8a;
}

/****************************/
#txtName{
  font-family: 'cs_prajad', sans-serif;
  margin-top: 80px;
    border: 0;
    border-bottom: 1px solid rgba(0,0,0,.15);
    -webkit-border-radius: 0;
    border-radius: 0;
    font-weight: 300;
    font-size: 52px;
    width: 100%;
    height: 80px;
    outline: 0;

}

/************CSS content Start****************/
.content {
    background: #fff;
    float: left;
    max-width: 740px;
    border: 1px solid #e6e6e6;
    padding: 20px;
    padding-right: 100px;
    padding-left: 100px;
}


.content-title {
    margin: 60px 0px 0px 0px;
    width: 100%;
    font-size: 28px;
    text-align: center;
    float: left;
    font-weight: 600;
}

.content-type {
    float: right;
    width: 50%;
    margin-top: -10px;
    margin-bottom: 50px;
    opacity: 0.8;
}

.content-type-text {
    float: left;
    padding: 12px 10px;
    font-size: 16px;
    font-weight: 600;
    color: #008a0c;
}

.content-tag{
    float: left;
    width: 50%;
    margin-top: -10px;
    margin-bottom: 50px;
    opacity: 0.6;
}

.content-tag-text {
    float: right;
    padding: 10px 10px;
    font-weight: 600;
    font-size: 18px;
}

.content-article *{
    font-family: 'cs_prajad', sans-serif !important;
    word-wrap: break-word;
    margin: 5px;
    color: #000 !important;
    background-color: #fff !important;
    font-size: 20px !important;
    line-height: 45px !important;
}

.content-article{
    font-family: 'cs_prajad', sans-serif !important;
    word-wrap: break-word;
    margin: 5px;
    color: #000 !important;
    background-color: #fff !important;
    font-size: 20px !important;
    line-height: 45px !important;
}

.content-article img{
    display: block;
    margin-left: auto;
    margin-right: auto;
    margin-top: 20px;
    margin-bottom: 20px;
    width: 160px !important;
}

    
.content-article * {
        font-family: 'cs_prajad', sans-serif !important;
        word-wrap: break-word;
        margin: 5px;
        color:#000 !important;
        background-color:#fff !important;
        font-size: 20px !important;
        line-height: 45px !important;
        /*min-width: 100%;*/
        }

        .content-article{
        font-family: 'cs_prajad', sans-serif !important;
        word-wrap: break-word;
        margin: 5px;
        color:#000 !important;
        background-color:#fff !important;
        font-size: 20px !important;
        line-height: 45px !important;
        min-width: 620px;
        }
    
    
    

.content-profile{
padding: 20px 40px;
float: left;
width: 80%;
}

.content-profile-into{
float: left;
width: 25%;
}

.content-profile-img{
border-radius: 100px;
height: 80px;
object-fit: cover;
width: 80px;
display: inline-block;
margin: 0px 0px;
padding: 0px;
}

.content-profile-text{
float: left;
width: 55%;
}

#name{
font-weight: 600;
font-size:24px
}


@media screen and (max-width: 520px) {

.content-into {
margin: 0px 20px;
}
.content-profile-into {
float: none;
text-align: center;
width: 100%;
}
.content-profile-text {
float: none;
text-align: center;
width: 100%;
margin: 15px 0px;
}

#detail{
font-size: 16px;
font-weight: 400;
}
#closecontent{
top: 0;
right: 0;
left: 0;

}


}


#closecontent {
position: fixed;
top: 50px;
right: 80px;
z-index: 4;
}
    
        .comments{
        width: 100%;
        float: left;
        border-bottom: 1px solid #eee;
        width: 100%;
        padding: 15px 0px;
    }
    .comments-img{
        float: left;
        height: 40px;
        width: 40px;
        border-radius: 100px;
        object-fit: cover;
        display: inline-block;
        margin: 0px 15px;
        padding: 0px;
    }
    
    .comments-name{
        float: left;
        width: 50%;
        font-weight: 600;
        margin-bottom: 5px;
    }
    
    #frm-comment{
        float: left;
        width: 100%;
        margin: 30px 10px;
    }
    
    #Share {
        font-size: 15px;
        text-align: center;
        padding: 10px;
        max-width: 240px;
        position: absolute;
        bottom: 140%;
        right: 0;
        border: 1px solid #e6e6e6;
        background: #fff;
        margin: 0px 0px;
        box-shadow: 0 1px 2px rgba(0,0,0,.25), 0 0 1px rgba(0,0,0,.35);
    }
    
    #Share:before {
        position: absolute;
        bottom: -12px;
        right: 21px;
        display: inline-block;
        border-right: 12px solid transparent;
        border-top: 12px solid #ccc;
        border-left: 12px solid transparent;
        border-top-color: rgba(0,0,0,0.2);
        content: '';
    }
    #Share:after {
        position: absolute;
        bottom: -10px;
        right: 21px;
        display: inline-block;
        border-right: 12px solid transparent;
        border-top: 12px solid #fff;
        border-left: 12px solid transparent;
        content: '';

    }
    
    
    .Hide
    {
        display:none;
    }
    
    
    .toggle{
        margin-top:0px;
    }
    
    
    #edit {
        display:none;
        position: absolute;
        top: 80%;
        right: 0px;
        width: 100%;
        border: 1px solid #e6e6e6;
        font-size:14px;
        background:#fff;
        width:60px;
        height:40px;
        display:none;
        padding:5px;
        box-shadow: 0 4px 12px 0 rgba(0,0,0,.05)!important;
    }
    
    #edit:before {
        position: absolute;
        top: -7px;
        right: 9px;
        display: inline-block;
        border-right: 7px solid transparent;
        border-bottom: 7px solid #ccc;
        border-left: 7px solid transparent;
        border-bottom-color: rgba(0,0,0,0.2);
        content: '';
    }
    #edit:after {
        position: absolute;
        top: -6px;
        right: 10px;
        display: inline-block;
        border-right: 6px solid transparent;
        border-bottom: 6px solid #fff;
        border-left: 6px solid transparent;
        content: '';
    }
    
    
    .Hide
    {
        display:none;
    }
    
    
    .btnedit{
        margin:10px;
    }

    @media only screen and (max-width: 900px) {
        .content-article{
        min-width: 0px;
        }

        .content{
            padding: 20px;
            padding-right: 50px;
            padding-left: 50px;
        }


    }
        


    @media only screen and (max-width: 620px) {

        .content{
            padding: 20px;
            padding-right: 20px;
            padding-left: 20px;
        }

        .content-article * {
            font-size: 18px !important;
        line-height: 40px !important;
        }

        .content-article{
        font-size: 18px !important;
        line-height: 40px !important;
        }
        .content-title {
        font-size: 28px;
        font-weight: 600;
    }


    }



    .iconlike{
        float: left;
        padding: 8px;
        width: 30px;
        border: 1px solid rgba(0,0,0,.15);
        border-radius: 50px;
        opacity: 1;
    }
    .iconlike:hover { 
        border: 2px solid #ff7f7f;
    }
        
    .iconlike:active { 
        border: 2px solid #ff7f7f;
        box-shadow: 0px 0px 15px 1px rgba(0,0,0,.15)!important;
    }


    #opencontent{
        position: fixed!important;
        width: 100%;
        height: 100%;
        z-index: 100;
        background: #e2e2e261;
        top: 0;
        overflow-y: scroll;
        right: 0;
        display:none;
    }

    .check{
        display:none;    
        position: absolute;  
        position: fixed;
        top: 30%;
        left: 40%;
        width:80px
    }
        
    .textlike{
        padding: 15px 5px 15px 15px;
        float: left;
        font-size: 14px;
        /* font-weight: 600; */
    }

    #share ul{
        padding: 0px;
        margin: 0px;
        margin-bottom: 0;
        padding: 0;
        list-style: none;
        list-style-image: none;
        font-size: 15px;
        text-align: center;
        letter-spacing: 0;
        font-style: normal;
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
        line-height: 1.4;   
    }

    #fb-share-button{
        list-style: none !important;
        display: block !important;
        padding: 5px 0 !important;
        border: 0 !important;
        text-align: left !important;
        width: 100% !important;
        line-height: 1.4 !important;
        white-space: nowrap !important;
        padding: 5px 15px !important;
        -webkit-box-sizing: border-box !important;
        box-sizing: border-box !important;
    }

    #line-share-button{
        list-style: none !important;
        display: block !important;
        padding: 0px 0 !important;
        border: 0 !important;
        text-align: left !important;
        width: 100% !important;
        line-height: 1.4 !important;
        white-space: nowrap !important;
        padding: 5px 15px !important;
        -webkit-box-sizing: border-box !important;
        box-sizing: border-box !important;
    }

/************  main start  ****************/
.write-post {
    padding: 20px;
    box-shadow: 0 4px 12px 0 rgba(0,0,0,.05)!important;
    border: 1px;
    max-width: 300px;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
    font-size: x-large;
    font-weight: bold;
    border-bottom: 3px solid #54ada1;
}
.write-create {
    padding: 20px;
    border: 1px solid #f3f3f3 !important;
    border: 1px;
    max-width: 300px;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
}

/************  main end  ****************/

</style>
  
</head>
<div id="app">
<header class="header">
    <nav>
        <div class="navleft">
        <ul>
            <li>
              <router-link class="nav__item" to="/tags">
                <img src="/icon/sea-waves.svg"style="width: 20px;padding-top:5px" >    
              </router-link>
            </a>   
            </li>
            
            <li >
            <a href="#"></a>   
            </li>
        </ul>
        </div>

        <div class="navcenter">
             <router-link class="nav__item" to="/">
                <img src="icon/namelogo.svg" style="width: 150px;">
              </router-link>
            </a>
        </div>

        <div class="navright">
        <ul>
                <li ></li>
                
                <li>
                    <router-link class="nav__item" to="/search">
                <!--<a id="btnsearch" href="#" style="">-->
                    <img src="/icon/magnifying-glass.svg" style="width: 20px;padding-top:5px">    
                    </router-link>
                </li>
            </ul>
        </div>    
    </nav>
</header>

<body>


<!--
  <nav class="nav">
    new</router-link>
    <router-link class="nav__item" to="/awesome">Awesome-Vue</router-link>
    <router-link class="nav__item" to="/search">search</router-link>
  </nav>


  
-->
<transition name="fade" mode="out-in">
  <router-view></router-view>
</transition>
</div>

<template id="new" style="overflow: auto;height:100%" >
  <section class="section">
    
    <div id="scroll" class="scroll" >
      <div style="margin-left: auto; margin-right: auto; max-width: 820px;">

      <div class="btn-write" onclick="window.location.href='write.php'" >
          <span class="btn-write-text">WRITE YOUR STORY</span>
       </div>
       <div style="max-width:220px;margin: 20px auto;">
       <router-link to="/"><div style="float: left;width: 50%;color: rgb(99, 100, 99);font-size: 18px;line-height: 50px;text-align: center;">Popular</div></router-link>
       <router-link to="/new"><div style="float: left;width: 50%;border-bottom: 5px solid #cecece;color: rgb(99, 100, 99);font-size: 18px;line-height: 50px;text-align: center;font-weight: 600;">Latest</div></router-link>
      </div>

      <br>
      <br>
      <br>

    <div class="feed" v-for="data in commits" >
      <div class="feed-title">
          <router-link :to="'/story/' + data.content_id">
          <div class="feed-title-text">{{  data.contentName }} </div> 
          </router-link>
        <div class="feed-title-under">
          <router-link :to="'/tag/' + data.tag_id"><div class="feed-tag">{{  data.tagname }}</div></router-link>
          <router-link :to="'/type/' + data.type"><div class="feed-type">{{  data.type }}</div></router-link>
      </div> 
      
        <div class="feed-content">
            <router-link :to="'/story/' + data.content_id">
              <span v-if="ifdraw(data.content)"><img v-bind:src="data.content | draw"></span> 
              <div class="feed-content-into">
                  {{ data.content | truncate() }}
            </div> 
          </router-link>
        <div class="feed-date"> {{ data.contentDate | timeSince() }} <span class="feed-like">{{ data.contentLike | liked() }}</span>
        </div>
      </div> 

      <div class="feed-writer">
        <router-link :to="'/name/' + data.name">
        <img v-bind:src="data.profile | profileExists" class="feed-writer-profile"> 
        <div class="feed-writer-name">{{data.name}} <span class="feed-writer-detail">{{data.detail}}</span>
        </div>
        </router-link>
    </div>
  </div>

</div>
</div>
  </section>  
</template>



<template id="awesome">
  <section class="section">
    <div id="top-scroll" class="scroll" >
            <div style="margin-left: auto;margin-right: auto;max-width: 820px;">
        
        
              <router-link to="/main">
            <div class="btn-write" >
                <span class="btn-write-text">WRITE YOUR STORY</span>
            </div>
          </router-link>
            <div style="max-width:220px;margin: 20px auto;">
            <router-link to="/"><div style="float: left;width: 50%;border-bottom: 5px solid #cecece;color: rgb(99, 100, 99);font-size: 18px;line-height: 50px;text-align: center;font-weight: 600;">Popular</div></router-link>
            <router-link to="/new"><div style="float: left;width: 50%;color: rgb(99, 100, 99);font-size: 18px;line-height: 50px;text-align: center;">Latest</div></router-link>
            </div>

            <br>
            <br>
            <br>
            
            <div class="feed" v-for="data in commits" >
                <router-link :to="'/story/' + data.content_id">
                <div class="feed-title-text">{{  data.contentName }} </div> 
                </router-link>
                <div class="feed-title-under">          
                  <router-link :to="'/tag/' + data.tag_id"><div class="feed-tag">{{  data.tagname }}</div></router-link>           
                  <router-link :to="'/type/' + data.type"><div class="feed-type">{{  data.type }}</div></router-link> 
              </div> 
                <div class="feed-content">
                  <router-link :to="'/story/' + data.content_id">
                    <span v-if="ifdraw(data.content)"><img v-bind:src="data.content | draw"></span> 
                    <div class="feed-content-into">
                        {{ data.content | truncate() }}
                  </div> 
                </router-link>
                <div class="feed-date"> {{ data.contentDate | timeSince() }} <span class="feed-like">{{ data.contentLike | liked() }}</span>
                </div>
              </div> 
        
              <div class="feed-writer">
                <router-link :to="'/name/' + data.name">
                <img v-bind:src="data.profile | profileExists" class="feed-writer-profile"> 
                <div class="feed-writer-name">{{data.name}} <span class="feed-writer-detail">{{data.detail}}</span>
                </div>
                </router-link>
          </div>
        
        </div>
        </div>
  </section>  
</template>


<template id="tags">
  <section class="section">
  <div id="tags-scroll" class="scroll"  style="overflow: auto;height: 100%;width: 100%;position: fixed;">
    <div style="margin-top:100px"></div>
    <div   v-for="data in tags" >
    <router-link :to="'/tag/' + data.tag_id">
    <div class="tag"><img v-bind:src="data.tagDraw"><div class="tag-text"><div class="tag-name">{{data.tagname}}</div><div class="tag-detail">{{data.tagDetail}} </div><div class="tag-int">{{data.tagStories}}   Stories</div></div></div>
    </router-link>
  </div>
</div>
  </section>  
</template>

<template id="search">
  <section class="section">
   

<div id="searches-scroll" class="scroll">
  <div style="margin-left: auto;margin-right: auto;max-width: 820px;">
    <input id="txtName" @keyup="addMessage" @keyup.enter="addMessage"  v-model="txtInput" type="text">
    <div class="feed" v-for="data in searches">
        <div class="feed-title">
            <router-link :to="'/story/' + data.content_id">
             <div class="feed-title-text">{{  data.contentName }} </div> 
            </router-link>
            <div class="feed-title-under">          
              <router-link :to="'/tag/' + data.tag_id"><div class="feed-tag">{{  data.tagname }}</div></router-link>           
              <router-link :to="'/type/' + data.type"><div class="feed-type">{{  data.type }}</div></router-link> 
          </div> 
            <div class="feed-content">
              <router-link :to="'/story/' + data.content_id">
                <span v-if="ifdraw(data.content)"><img v-bind:src="data.content | draw"></span> 
                <div class="feed-content-into">
                    {{ data.content | truncate() }}
              </div> 
            </router-link>
            <div class="feed-date"> {{ data.contentDate | timeSince() }} <span class="feed-like">{{ data.contentLike | liked() }}</span>
            </div>
          </div> 
    
          <div class="feed-writer">
            <router-link :to="'/name/' + data.name">
            <img v-bind:src="data.profile | profileExists" class="feed-writer-profile"> 
            <div class="feed-writer-name">{{data.name}} <span class="feed-writer-detail">{{data.detail}}</span>
            </div>
            </router-link>
          </div>
    
    </div>
    </div>
  </section>  
</template>


<template id="type">
  <section class="section">
    <div id="type-scroll" class="scroll" >
                  <div v-if="type === 'emotion'">
                      <div style="padding-top: 120px;padding-bottom: 20px;background: rgb(255, 244, 228);text-align: center;"><img src="https://image.flaticon.com/icons/svg/1189/1189128.svg" style="width: 80px;"><h1 style="font-size: xx-large;margin: 0px;color: rgb(255, 151, 0);">emotion</h1> <p style="margin: 0px 10px;">Emotion is energy in motion.</p></div>
                  </div>

                  <div v-else-if="type === 'knowledge'">

                      <div style="padding-top: 120px;padding-bottom: 20px;background: rgb(255, 244, 217);text-align: center;"><img src="https://image.flaticon.com/icons/svg/427/427735.svg" style="width: 80px;"><h1 style="font-size: xx-large;margin: 0px;color: rgb(255, 183, 0);">knowledge</h1> <p style="margin: 0px 10px;">Knowledge is the eye of desire and can become the pilot of the soul.</p></div>
                                               
                  </div>

                  <div v-else-if="type === 'experience'">
                    <div style="padding-top: 120px;padding-bottom: 20px;background: rgb(221, 255, 222);text-align: center;"><img src="https://image.flaticon.com/icons/svg/892/892926.svg" style="
                      width: 80px;
                  "><h1 style="font-size: xx-large;margin: 0px;color: #499a4d;">experience</h1> <p style="margin: 0px;">experience is the teacher of all things.</p>
                  </div>                
                  </div>

                  <div v-else-if="type === 'story'">
                      <div style="padding-top: 120px;padding-bottom: 20px;background: rgb(253, 223, 228);text-align: center;"><img src="https://image.flaticon.com/icons/svg/119/119581.svg" style="width: 80px;"><h1 style="font-size: xx-large;margin: 0px;color: rgb(255, 79, 112);">story</h1> <p style="margin: 0px 10px;">Where am I going? What am I doing? What is the meaning of life?.</p></div>
                  </div>

                  <div v-else-if="type === 'dhamma'">
                      <div style="padding-top: 120px;padding-bottom: 20px;background: rgb(227, 255, 190);text-align: center;"><img src="https://image.flaticon.com/icons/svg/1458/1458984.svg" style="width: 80px;"><h1 style="font-size: xx-large;margin: 0px;color: rgb(91, 162, 0);">dhamma</h1> <p style="margin: 0px 10px;">Dhamma is like air that people need to breathe.</p></div>
                  </div>

                  <div v-else-if="type === 'tipitaka'">
                      <div style="padding-top: 120px;padding-bottom: 20px;background: rgb(255, 169, 164);text-align: center;"><img src="https://image.flaticon.com/icons/svg/129/129362.svg" style="width: 80px;"><h1 style="font-size: xx-large;margin: 0px;color: rgb(255, 255, 255);">tipitaka</h1> <p style="margin: 0px 10px;">All of the Buddha's teachings were divided into three parts.</p></div>             
                  </div>
           <div style="margin-left: auto;margin-right: auto;max-width: 820px;">
            <div class="feed" v-for="data in commits" >
              <div class="feed-title">
                 <router-link :to="'/story/' + data.content_id">
                  <div class="feed-title-text">{{  data.contentName }} </div> 
                 </router-link>
                <div class="feed-title-under">
                  <router-link :to="'/tag/' + data.tag_id"><div class="feed-tag">{{  data.tagname }}</div></router-link> 
                <router-link :to="'/type/' + data.type"><div class="feed-type">{{  data.type }}</div></router-link>
              </div> 
                <div class="feed-content">
                  <router-link :to="'/story/' + data.content_id">
                    <span v-if="ifdraw(data.content)"><img v-bind:src="data.content | draw"></span> 
                    <div class="feed-content-into">
                        {{ data.content | truncate() }}
                  </div> 
                </router-link>
                <div class="feed-date"> {{ data.contentDate | timeSince() }} <span class="feed-like">{{ data.contentLike | liked() }}</span>
                </div>
              </div> 
        
              <div class="feed-writer">
                  <router-link :to="'/name/' + data.name">
                    <img v-bind:src="data.profile | profileExists" class="feed-writer-profile"> 
                    <div class="feed-writer-name">{{data.name}} <span class="feed-writer-detail">{{data.detail}}</span>
                    </div>
                  </router-link>
          </div>
        
        </div>
        </div>
  </section>  
</template>


<template id="tag">
  <section class="section">
    <div id="tag-scroll"class="scroll" >
          <div style="padding-top: 120px; padding-bottom: 20px;     background: rgb(135, 189, 182); text-align: center;"><img v-bind:src="tagDraw" style="width:110px"><h1 style="font-size: xx-large; margin: 0px; color: #fff;">{{ tagname }}</h1> <p style="margin: 0px 10px;">{{ tagDetail }}</p></div>
            <div style="margin-left: auto;margin-right: auto;max-width: 820px;">
            <div class="feed" v-for="data in commits" >
              <div class="feed-title">
                <router-link :to="'/story/' + data.content_id">
                  <div class="feed-title-text">{{  data.contentName }} </div> 
                 </router-link>
                <div class="feed-title-under">          
                  <router-link :to="'/tag/' + data.tag_id"><div class="feed-tag">{{  data.tagname }}</div></router-link> 
                <router-link :to="'/type/' + data.type"><div class="feed-type">{{  data.type }}</div></router-link>
              </div> 
                <div class="feed-content">
                  <router-link :to="'/story/' + data.content_id">
                    <span v-if="ifdraw(data.content)"><img v-bind:src="data.content | draw"></span> 
                    <div class="feed-content-into">
                        {{ data.content | truncate() }}
                  </div> 
                </router-link>
                <div class="feed-date"> {{ data.contentDate | timeSince() }} <span class="feed-like">{{ data.contentLike | liked() }}</span>
                </div>
              </div> 
        
              <div class="feed-writer">
                <router-link :to="'/name/' + data.name">
                  <img v-bind:src="data.profile | profileExists" class="feed-writer-profile"> 
                  <div class="feed-writer-name">{{data.name}} <span class="feed-writer-detail">{{data.detail}}</span>
                  </div>
                </router-link>
          </div>
        
        </div>
        </div>
  </section>  
</template>


<template id="name">
  <section class="section">
    <div id="user-scroll" class="scroll">
        <div style="padding-bottom: 20px; text-align: center;">
            <div style="height: 220px;background-image: url(/icon/backgroundtype.svg);background-size: 500px;"></div>
          <div class="profile-photo"><img v-bind:src="img | profileExists"class="profile-photo-img"></div>
          <h2 style=" margin: 0px;margin-top: 15px;color:#54ada1">{{ name }}</h2> <p style="margin: 5px 10px;">{{ detail }} </p>
        <div class="profile-followers"><span class="profile-follow-int">{{stories}}</span><span class="profile-follow-text">Stories</span></div>
        </div>        
            <div style="margin-left: auto;margin-right: auto;max-width: 820px;">
            <div class="feed" v-for="data in commits" >
              <div class="feed-title">
                <router-link :to="'/story/' + data.content_id">
                  <div class="feed-title-text">{{  data.contentName }} </div> 
                 </router-link>
                <div class="feed-title-under">          
                  <router-link :to="'/tag/' + data.tag_id"><div class="feed-tag">{{  data.tagname }}</div></router-link> 
                <router-link :to="'/type/' + data.type"><div class="feed-type">{{  data.type }}</div></router-link>
              </div> 
                <div class="feed-content">
                  <router-link :to="'/story/' + data.content_id">
                    <span v-if="ifdraw(data.content)"><img v-bind:src="data.content | draw" class="feed-user-draw"></span> 
                    <div class="feed-content-into">
                        {{ data.content | truncate() }}
                    </div> 
                  </router-link>
                <div class="feed-date"> {{ data.contentDate | timeSince() }} <span class="feed-like">{{ data.contentLike | liked() }}</span>
                </div>
              </div> 
        
        
        </div>
        </div>
  </section>  
</template>


<template id="story">

    
  <div style="max-width: 820px;margin-left: auto;margin-right: auto;margin-top: 80px;">

      <img src="https://visualpharm.com/assets/311/Easy-595b40b85ba036ed117dc0a2.svg" class='check'>
  
      <div @click="$router.go(-1)" id="closecontent">
          <img src="https://img.icons8.com/cotton/50/000000/circled-chevron-left.png">
      </div>





  <div class="content">
  <div class="content-title">{{story.contentName}}</div> 
    <router-link :to="'/type/' + story.type">  
      <div class="content-type">
        <div class="content-type-text">{{story.type}}</div>
      </div>
    </router-link>   
      <router-link :to="'/tag/' + story.tag_id">
        <div class="content-tag">
          <div class="content-tag-text">{{story.tagname}}</div>
        </div>
     </router-link>

    <article class="content-article" v-html="story.content"></article>
    <div style="
    float: left;
    width: 100%;
    border-bottom: 1px solid rgba(0,0,0,.05)!important;
    padding-bottom: 25px!important;
    margin-top:60px;
    ">
        <div style=" float: left; "><img class="iconlike" v-on:click="liked" src="https://image.flaticon.com/icons/svg/1531/1531027.svg">
            <span class="textlike">{{story.contentLike}}  liked</span></div>


        <div style="position: relative;float:right">

            <div  id="Share" v-if="showShare">
                <ul style=" margin: 0px; padding: 0px;">
                    <li id="fb-share-button" @click="fbButton"><img src="https://img.icons8.com/material/30/000000/facebook.png" style=" margin-bottom: -10px;opacity: 0.6; "> Share on facebook</li>
                    <li id="line-share-button" @click="lineButton"><img src="https://img.icons8.com/ios-glyphs/30/000000/line-me.png" style="margin-bottom: -10px;opacity: 0.6; "> Share on line</li>                           
                </ul>        
          </div>
            <div class="toggle" @click="showShare=!showShare" style="margin: 5px 20px;float: right;"><img src="http://pic.90sjimg.com/design/00/23/31/57/58eef971e8910.png" style="width:25px;"></div>
            </div>
                
      </div>

    <!-- /////////////////////   -->
    <router-link :to="'/name/' + story.name">  
    <div class="content-profile">
      <div class="content-profile-into">
        <img class="content-profile-img" v-bind:src="story.profile | profileExists">
      </div>
    
    <div class="content-profile-text">
      <div id="name">{{story.name}}</div>
      <div id="detail">{{story.detail}} </div>
    </div>
    </div>

  </router-link>
    <!-- /////////////////////   -->

    
  </div>
</div>
</template>




<template id="main">
  <div style="margin-top:80px">
    <img src="https://image.flaticon.com/icons/svg/124/124752.svg" style="display:block;width:140px;margin:0px auto">
    <div class="write-post" onclick="window.location='/write.php'">write your story</div>
    <div class="write-create" onclick="window.location='/create.html'">create a your tag</div>
    <div  onclick="window.location='/editnew.php'" style="
    padding: 15px 20px;
    border: 1px solid #f3f3f3 !important;
    max-width: 300px;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
    font-weight: 600;
    ">edit profile</div>
<div onclick="window.location='/logout.php'" style="color: rgb(255, 0, 0);padding: 15px 20px;    border: 1px solid #f3f3f3 !important;max-width: 300px;margin-left: auto;margin-right: auto;text-align: center;font-weight: 600;">logout</div>
  </div>
</template>


<script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.13/vue.min.js'></script>
<script src='https://unpkg.com/vue-router/dist/vue-router.js'></script>

  

<script>



  /*****************CHECK COOKIE START*********************/
  
function setCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "")  + expires + "; path=/";
}
function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}
function eraseCookie(name) {   
    document.cookie = name+'=; Max-Age=-99999999;';  
}

  /*****************CHECK COOKIE END*********************/

const vueComponent = {
  template: '#new',
  data(){
      return{
        commits: null,
        busy: false,
        loading: false,
      }
  },
  methods: {
    init(){
      document.title = "latest";
      var xhr = new XMLHttpRequest();
      var self = this;
      xhr.open('GET','http://jaipun.com/feed/feed_new');
      xhr.onload = function () {
        self.commits = JSON.parse(xhr.responseText);
      };
      xhr.send();
    },
    loadinit(content_id){
      var xhr = new XMLHttpRequest();
      var self = this;
      var contents;
      xhr.open('GET', "http://jaipun.com/feed/load_new?content_id="+content_id);
      xhr.onload = function () {
        contents = JSON.parse(xhr.responseText);
        for (var i = 0; i < contents.length; i++) {
          self.commits.push({
            content_id:contents[i].content_id,
            contentName:contents[i].contentName,
            content:contents[i].content,
            contentDate:contents[i].contentDate,
            user_id:contents[i].user_id,
            name:contents[i].name,
            detail:contents[i].detail,      
            contentLike:contents[i].contentLike,
            tagname:contents[i].tagname,
            tag_id:contents[i].tag_id,            
            type:contents[i].type,        
            profile:contents[i].profile,                       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
          });
        }
      };
      xhr.send();
      },
      ifdraw:function(text) {
        var n = text.search("draw/");
        var e = text.search("png"); var en = e + 3;
        return text.slice(n, en);
      }
    },mounted() {
    this.init(); 
    const listElm = document.querySelector('#scroll');
    listElm.addEventListener('scroll', e => {   
      if(listElm.scrollTop + listElm.clientHeight >= listElm.scrollHeight) {
        this.loadinit(this.commits[this.commits.length - 1].content_id);
      }
    });
  }
}


const awesomeComponent = {
  template: '#awesome',
  data(){
      return{
        commits: null,
        loading: false,
      }
  },
  methods: {
    init(){
      document.title = "Jaipun";      
      var xhr = new XMLHttpRequest();
      var self = this;
      xhr.open('GET','http://jaipun.com/feed/feed_top');
      xhr.onload = function () {
        self.commits = JSON.parse(xhr.responseText);
      };
      xhr.send();
    },
    loadinit(contentLike){
      var xhr = new XMLHttpRequest();
      var self = this;
      var contents;
      xhr.open('GET', "http://jaipun.com/feed/load_top?contentLike="+contentLike);
      xhr.onload = function () {
        contents = JSON.parse(xhr.responseText);
        for (var i = 0; i < contents.length; i++) {
          self.commits.push({
            content_id:contents[i].content_id,
            contentName:contents[i].contentName,
            content:contents[i].content,
            contentDate:contents[i].contentDate,
            user_id:contents[i].user_id,
            name:contents[i].name,
            detail:contents[i].detail,      
            contentLike:contents[i].contentLike,
            tagname:contents[i].tagname,
            type:contents[i].type,     
            tag_id:contents[i].tag_id,    
            profile:contents[i].profile,                       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
          });
        }
      };
      xhr.send();
      },
      ifdraw:function(text) {
        var n = text.search("draw/");
        var e = text.search("png"); var en = e + 3;
        return text.slice(n, en);
      }
    },mounted() {
    this.init(); 
    const listElm = document.querySelector('#top-scroll');
    listElm.addEventListener('scroll', e => {   
      if(listElm.scrollTop + listElm.clientHeight >= listElm.scrollHeight) {
        this.loadinit(this.commits[this.commits.length - 1].contentLike);
      }
    });
  }
}


const type = {
  template: '#type',
  data(){
      return{
        commits: null,
        loading: false,
        type:null,
      }
  },
  methods: {
    init(){
      document.title = this.$route.params.type+"  |  jaipun";      
      var xhr = new XMLHttpRequest();
      var self = this;
      xhr.open('GET','http://jaipun.com/feed/type_new?t='+this.$route.params.type);
      xhr.onload = function () {
        self.commits = JSON.parse(xhr.responseText);
      };
      xhr.send();
    },
    loadinit(content_id){
      var xhr = new XMLHttpRequest();
      var self = this;
      var contents;
      xhr.open('GET', "http://jaipun.com/feed/typeload_new?content_id="+content_id+"&t="+this.$route.params.type);
      xhr.onload = function () {
        contents = JSON.parse(xhr.responseText);
        for (var i = 0; i < contents.length; i++) {
          self.commits.push({
            content_id:contents[i].content_id,
            contentName:contents[i].contentName,
            content:contents[i].content,
            contentDate:contents[i].contentDate,
            user_id:contents[i].user_id,
            name:contents[i].name,
            detail:contents[i].detail,      
            contentLike:contents[i].contentLike,
            tagname:contents[i].tagname,
            type:contents[i].type,     
            contentTop:contents[i].contentTop,     
            tag_id:contents[i].tag_id,   
            profile:contents[i].profile,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
          });
        }
      };
      xhr.send();
      },
      ifdraw:function(text) {
        var n = text.search("draw/");
        var e = text.search("png"); var en = e + 3;
        return text.slice(n, en);
      }
    },mounted() {
    this.type = this.$route.params.type;
    this.init(); 
    const listElm = document.querySelector('#type-scroll');
    listElm.addEventListener('scroll', e => {   
      if(listElm.scrollTop + listElm.clientHeight >= listElm.scrollHeight) {
        this.loadinit(this.commits[this.commits.length - 1].content_id);
      }
    });
  }
}



const tags = {
  template: '#tags',
  data(){
      return{
        tags: null,
        loading: false,
      }
  },
  methods: {
    init(){
      var xhr = new XMLHttpRequest();
      var self = this;
      xhr.open('GET',"  http://jaipun.com/feed/tag_top");
      xhr.onload = function () {
        self.tags = JSON.parse(xhr.responseText);
        document.title = 'All of tag | Jaipun'; 
      };
      xhr.send();
    },
    loadinit(tagTop){
      var xhr = new XMLHttpRequest();
      var self = this;
      var contents;
      xhr.open('GET', "http://jaipun.com/feed/tagload_top?tagTop="+tagTop);
      xhr.onload = function () {
        contents = JSON.parse(xhr.responseText);
        for (var i = 0; i < contents.length; i++) {
          self.tags.push({
            tag_id:contents[i].tag_id,
            tagname:contents[i].tagname,
            tagDetail:contents[i].tagDetail,
            tagStories:contents[i].tagStories,
            tagDraw:contents[i].tagDraw,
            tagTop:contents[i].tagTop,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
          });
        }
      };
      xhr.send();
      }
    },mounted() {
    this.init(); 
    const listElm = document.querySelector('#tags-scroll');
    listElm.addEventListener('scroll', e => {   
      if(listElm.scrollTop + listElm.clientHeight >= listElm.scrollHeight) {
        this.loadinit(this.tags[this.tags.length - 1].tagTop);
      }
    });
  }
}


const search = {
  template: '#search',
  data(){
    return{
      txtInput: '',
      searches: null,
    }
  },
  methods: {
      addMessage(){
        console.log(this.txtInput);
        if(this.txtInput != ''){
        var xhr = new XMLHttpRequest();
        var self = this;
        xhr.open('GET',encodeURI("http://jaipun.com/feed/search_top?t="+this.txtInput));
        xhr.onload = function () {
          self.searches = JSON.parse(xhr.responseText);
        };
        xhr.send();
        }else{ this.searches=""; }
      },
      loadinit(contentTop){
      var xhr = new XMLHttpRequest();
      var self = this;
      var contents;
      xhr.open('GET', encodeURI("http://jaipun.com/feed/searchload_top?contentTop="+contentTop+"&t="+this.txtInput));
      xhr.onload = function () {
        contents = JSON.parse(xhr.responseText);
        for (var i = 0; i < contents.length; i++) {
          self.searches.push({
            content_id:contents[i].content_id,
            contentName:contents[i].contentName,
            content:contents[i].content,
            contentDate:contents[i].contentDate,
            user_id:contents[i].user_id,
            name:contents[i].name,
            detail:contents[i].detail,      
            contentLike:contents[i].contentLike,
            tagname:contents[i].tagname,
            type:contents[i].type,     
            contentTop:contents[i].contentTop,     
            tag_id:contents[i].tag_id,        
            profile:contents[i].profile,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
          });
        }
      };
      xhr.send();
      },
      ifdraw:function(text) {
        var n = text.search("draw/");
        var e = text.search("png"); var en = e + 3;
        return text.slice(n, en);
      }
  },
  mounted() {
    document.title = 'Search with Jaipun';      
    document.getElementById("txtName").focus();
    const listElm = document.querySelector('#searches-scroll');
    listElm.addEventListener('scroll', e => {   
      if(listElm.scrollTop + listElm.clientHeight >= listElm.scrollHeight) {
        this.loadinit(this.searches[this.searches.length - 1].contentTop);
      }
    });
  }
}


const tag = {
  template: '#tag',
  data(){
      return{
        commits: null,
        loading: false,
        tagname: null,
        tagDetail:null,
        tagDraw:null,
      }
  },
  methods: {
    detail(){
      var xhr = new XMLHttpRequest();
      var self = this;
      var detail;
      xhr.open('GET',"http://jaipun.com/data/tag/"+this.$route.params.tag_id);
      xhr.onload = function () {
        self.detail = JSON.parse(xhr.responseText);
        self.tagname = self.detail.tagname;
        self.tagDetail = self.detail.tagDetail;
        self.tagStories = self.detail.tagStories;       
        self.tagDraw = self.detail.tagDraw;    
        document.title = self.detail.tagname +' | Jaipun';              
         
      };
      xhr.send();
    },
    init(){
      var xhr = new XMLHttpRequest();
      var self = this;
      xhr.open('GET',"http://jaipun.com/feed/tagid_new?id="+this.$route.params.tag_id);
      xhr.onload = function () {
        self.commits = JSON.parse(xhr.responseText);
      };
      xhr.send();
    },
    loadinit(content_id){
      var xhr = new XMLHttpRequest();
      var self = this;
      var contents;
      xhr.open('GET', "http://jaipun.com/feed/tagidload_new?content_id="+content_id+"&id="+this.$route.params.tag_id);
      xhr.onload = function () {
        contents = JSON.parse(xhr.responseText);
        for (var i = 0; i < contents.length; i++) {
          self.commits.push({
            content_id:contents[i].content_id,
            contentName:contents[i].contentName,
            content:contents[i].content,
            contentDate:contents[i].contentDate,
            user_id:contents[i].user_id,
            name:contents[i].name,
            detail:contents[i].detail, 
            profile:contents[i].profile,                       
            contentLike:contents[i].contentLike,
            tagname:contents[i].tagname,
            type:contents[i].type,     
            contentTop:contents[i].contentTop,   
            tag_id:contents[i].tag_id, 
            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
          });
        }
      };
      xhr.send();
      },
      ifdraw:function(text) {
        var n = text.search("draw/");
        var e = text.search("png"); var en = e + 3;
        return text.slice(n, en);
      }
    },mounted() {
    this.detail();       
    this.init(); 
    const listElm = document.querySelector('#tag-scroll');
    listElm.addEventListener('scroll', e => {   
      if(listElm.scrollTop + listElm.clientHeight >= listElm.scrollHeight) {
        this.loadinit(this.commits[this.commits.length - 1].content_id);
      }
    });
  }
}


const name = {
  template: '#name',
  data(){
      return{
        commits: null,
        member_id: null,
        name: null,
        detail: null,  
        stories: null, 
        img: null,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
        loading: false,
      }
  },
  methods: {
    profile(){
      var xhr = new XMLHttpRequest();
      var self = this;
      var profiles; 
      xhr.open('GET','http://jaipun.com/data/users/'+this.$route.params.name);
      xhr.onload = function () {
        profiles = JSON.parse(xhr.responseText);

        self.member_id = profiles.member_id;
        self.name = profiles.name;      
        self.detail = profiles.detail;
        self.stories = profiles.stories;   
        self.img = profiles.profile;                                       
        document.title = profiles.name +' | Jaipun';                                                 
        xhr.open('GET','http://jaipun.com/feed/feed_user?id='+ profiles.member_id);
        xhr.onload = function () {
          self.commits = JSON.parse(xhr.responseText);
        };
        xhr.send();
      };
      xhr.send();
    },
    loadinit(content_id){
      var xhr = new XMLHttpRequest();
      var self = this;
      var contents;
      xhr.open('GET',"http://jaipun.com/feed/load_user?content_id="+content_id+"&id="+this.user_id);
      xhr.onload = function () {
        contents = JSON.parse(xhr.responseText);
        for (var i = 0; i < contents.length; i++) {
          self.commits.push({
            content_id:contents[i].content_id,
            contentName:contents[i].contentName,
            content:contents[i].content,
            contentDate:contents[i].contentDate,
            user_id:contents[i].user_id,
            name:contents[i].name,
            detail:contents[i].detail,      
            contentLike:contents[i].contentLike,
            tagname:contents[i].tagname,
            type:contents[i].type,     
            contentTop:contents[i].contentTop,     
            tag_id:contents[i].tag_id,      
            profile:contents[i].profile,                       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
          });
        }
      };
      xhr.send();
      },
      ifdraw:function(text) {
        var n = text.search("draw/");
        var e = text.search("png"); var en = e + 3;
        return text.slice(n, en);
      }
    },mounted() {
      //alert(this.$route.params.name);
      this.profile();     
      //this.init(this.user_id); 
      const listElm = document.querySelector('#user-scroll');
      listElm.addEventListener('scroll', e => {   
        if(listElm.scrollTop + listElm.clientHeight >= listElm.scrollHeight) {
          this.loadinit(this.commits[this.commits.length - 1].content_id);
        }
      });
  }
}



const story = {
  template:'#story',
  data(){
      return{
        story: null,
        showShare: false,
        checklike: true,        
      }
  },
  methods: {
    openstory() {
      var xhr = new XMLHttpRequest();
      var self = this;
      xhr.open('GET',"http://jaipun.com/data/stories/"+this.$route.params.content_id);
      xhr.onload = function () {
        self.story = JSON.parse(xhr.responseText);      
        self.story.content = self.story.content.replace(/&lt;/gm,"<").replace(/&quot;/gm,"'").replace(/&gt;/gm,'>').replace(/&amp;nbsp;/gm,' ');
        self.story.contentLike = Number(self.story.contentLike);
        document.title = self.story.contentName +' | Jaipun';                                                 
        
      };
      xhr.send();
    },
    fbButton:function(){
      var urlshare = "jaipun.com/story.php?id="+this.story.content_id;
      window.open('https://www.facebook.com/sharer/sharer.php?u=' + urlshare,
          'facebook-share-dialog',
          'width=800,height=600'
      );
      return false;
    },
    lineButton:function(){
      var urlshare = "jaipun.com/story.php?id="+this.story.content_id;      
      window.open('https://social-plugins.line.me/lineit/share?url=' + urlshare,
          'facebook-share-dialog',
          'width=800,height=600'
      );
      return false;
    },
    liked: function () {
      if(this.checklike==true){
      this.story.contentLike += 1;
      var xhr = new XMLHttpRequest();
      var self = this;
      var likes;
      xhr.open('GET','/like.php?liked=1&content_id='+this.story.content_id);
      xhr.onload = function () {
        likes = xhr.responseText;
        //alert(likes);
      };
      xhr.send();
      this.checklike = false;
      }
    }
  }
  ,mounted() {
      //alert(this.$route.params.content_id);  
      //this.init(this.user_id); 
      this.openstory();
  }
};


const main = {
  template: '#main',
  mounted() {
      var member_id =getCookie('member_id');
      if(member_id == null){
        window.location.href="/register.php"
      }
      //this.init(this.user_id); 
  }
};

Vue.use(VueRouter)
const routes = [
  { path: '/new', component: vueComponent },
  { path: '/main', component: main },  
  { path: '/', component: awesomeComponent },
  { path: '/tags', component: tags },
  { path: '/search', component: search },
  { path: '/type/:type', component: type },
  { path: '/tag/:tag_id', component: tag },
  { path: '/name/:name', component: name },
  { path: '/story/:content_id', component: story }  
]
const router = new VueRouter({
  routes,
})
const mv = new Vue({
  el: '#app',
  router,
})


Vue.filter('truncate', function (text) {
 return text.replace(/&lt;(?:.|\n)*?&gt;/gm, '').replace(/&amp;nbsp;/gi,' ').substring(0, 120) + '...';
});

Vue.filter('liked', function (text) {
  if(text == 0){
    return text = "";
  }else{
    return text = text + "  liked";
  }
});

Vue.filter('draw', function(text) {
  var n = text.search("draw/");
  var e = text.search("png"); var en = e + 3;
  return text.slice(n, en);
});


Vue.filter('profileExists', function(profile) {
  var http = new XMLHttpRequest();
  http.open('HEAD', profile);
  http.send();
  if (http.status == "404") {
      return url = '/profile/user.jpeg';
  } else {
      return url =  profile;
  }
});


Vue.filter('timeSince', function(timeStamp) {
  timeStamp = new Date(timeStamp * 1000);
  var now = new Date(),
  secondsPast = (now.getTime() - timeStamp.getTime() ) / 1000;
  if(secondsPast < 60){
      return parseInt(secondsPast) + ' seconds ago';
  }
  if(secondsPast < 3600){
      return parseInt(secondsPast/60) + ' minutes ago';
  }
  if(secondsPast <= 86400){
      return parseInt(secondsPast/3600) + ' hours ago';
  }
  if(secondsPast <= 259200){
      hour = timeStamp.getHours();
      minute = timeStamp.getMinutes();
      return parseInt(secondsPast/86400) + ' day ago at  ' + hour +":"+ minute;
  }
  if(secondsPast > 259200){
      day = timeStamp.getDate();
      month = timeStamp.toDateString().match(/ [a-zA-Z]*/)[0].replace(" ","");
      year = timeStamp.getFullYear() == now.getFullYear() ? "" :  " "+timeStamp.getFullYear();
      hour = timeStamp.getHours();
      minute = timeStamp.getMinutes();
      return day + " " + month + year + " " + hour +":"+ minute;
  }
});

</script>




</body>

</html>
